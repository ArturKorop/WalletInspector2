@model WalletInspector2.Core.Code.Data.Period
@{
    ViewBag.Title = "Home Page";
    var tags = (ViewBag.Tags as IEnumerable<string>).ToArray();
    var jsonTags = Json.Encode(tags);
    var lastDay = Model.Days.Last();
}

@Scripts.Render("~/bundles/main")

<script type="text/javascript">
    $(document).ready(function () {
        UpdateButtons();
        UpdatePrevNextButtons();
        UpdateAutocomplete(JSON.parse('@Html.Raw(jsonTags)'));
    })
</script>

<div id="dayView">
    <div>
        <div style="float:left">
            @using (Ajax.BeginForm("Previous", "Home", new AjaxOptions { HttpMethod = "Post", InsertionMode = InsertionMode.Replace, UpdateTargetId = "daysView", OnSuccess = "UpdateButtons" }))
            {
                <button type="submit" value="Prev" id="ButtonPrev" />
            }
        </div>

        <div style="float:left">
            @using (Ajax.BeginForm("Next", "Home", new AjaxOptions { HttpMethod = "Post", InsertionMode = InsertionMode.Replace, UpdateTargetId = "daysView", OnSuccess = "UpdateButtons" }))
            {
                <button type="submit" value="Next" id="ButtonNext" />
            }
        </div>


        <div style="float:left; margin: 0 5px 0 5px;">
            @Html.ActionLink("Year statistic", "Year", "Statistic", new { year = Model.Days.Last().Date.Year }, null)
        </div>

        <div style="float:none;">
            @Html.ActionLink("Month statistic", "Month", "Statistic", new { year = lastDay.Date.Year, month = lastDay.Date.Month }, null)
        </div>

    </div>

    <div class="row" id="daysView">
        @Html.Partial("~/Views/Home/DaysView.cshtml", Model)
    </div>
</div>

<div id="monthStat" style="font-size: 5px;"></div>
<div id="weekStat"></div>










